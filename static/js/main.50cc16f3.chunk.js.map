{"version":3,"sources":["utils.tsx","LinkSections.tsx","config.ts","auth.ts","SearchBar.tsx","Clock.tsx","StaticLinks.tsx","HomeSearch.tsx","TasksBar.tsx","TasksList.tsx","HomeTasks.tsx","App.tsx","index.tsx"],"names":["partial","f","headArgs","tailArgs","getValidURL","link","test","ls","window","localStorage","useCached","key","defaultValue","useState","cached","getItem","JSON","parse","data","setData","useEffect","setItem","stringify","HomeCheckbox","withStyles","root","color","checked","index","props","Checkbox","inputStyles","txtcolor","linecolor","underline","borderBottom","disabled","focused","error","dateTimePickerTheme","createMuiTheme","overrides","MuiInput","MuiPaper","border","rounded","borderRadius","backgroundColor","MuiPickersToolbar","toolbar","MuiPickersCalendarHeader","iconButton","margin","switchHeader","daysHeader","dayLabel","MuiPickersDay","day","daySelected","dayDisabled","current","MuiPickersClock","clock","pin","MuiPickersClockNumber","clockNumber","clockNumberSelected","MuiPickersClockPointer","pointer","thumb","borderColor","noPoint","MuiPickersYear","yearSelected","HomeMaterialInput","Input","HomeDatePicker","utils","DayJsUtils","ThemeProvider","theme","DatePicker","LoginContext","createContext","loggedIn","setLoggedIn","LoginStore","children","Provider","value","AddTaskContext","addTask","t","setAddTask","AddTaskStore","useReducer","_","a","state","dispatch","useAddTask","useContext","SectionContainer","styled","div","LinksWrapper","Section","title","length","id","Link","LinkSections","query","setAction","sites","setSites","sections","setSections","selected","setSelected","totalMatched","setTotalMatched","fetch","then","res","json","catch","err","console","document","documentElement","style","setProperty","Math","max","Object","keys","map","category","updateSections","useCallback","newSelected","newSections","pos","matches","forEach","idx","links","filtered","filter","name","toLowerCase","includes","push","isSelected","href","className","validator","isURL","match","onKeyDown","e","addEventListener","removeEventListener","TASKS_DISCOVERY_DOCS","called","useGoogleAPI","clientInit","setClientInit","offlineAccess","setOfflineAccess","gapi","load","updateLoggedInStatus","status","log","client","init","apiKey","clientId","discoveryDocs","scope","auth2","getAuthInstance","isSignedIn","listen","get","authInstance","signIn","signOut","logIn","logOut","username","currentUser","getBasicProfile","getGivenName","SearchInput","input","SearchDatePicker","SearchBar","text","setText","action","useRef","pickerOpen","setPickerOpen","taskText","setTaskText","updateTitle","start","blurCallback","bind","focusCallback","onSubmit","preventDefault","trim","clear","location","assign","encodeURIComponent","type","ref","autoFocus","autoComplete","onChange","target","variant","autoOk","okLabel","cancelLabel","Date","open","onAccept","d","due","toISOString","onClose","Wrapper","DateSpan","span","TimeSpan","Clock","date","setDate","timer","setInterval","clearInterval","dayjs","format","StaticLinksContainer","StaticLink","StaticLinks","MainContainer","HomeSearch","setQuery","useResizeDetector","height","undefined","TasksBarDiv","TaskListChooserButton","i","attrs","TasksBarText","DropDown","DropDownElement","TasksBar","tasklists","activeList","setActiveList","setOpen","onClick","list","TaskEntryDiv","TaskDescInput","TaskUIDiv","TrashIcon","DueDateDiv","DueIcon","TaskDatePicker","TaskEntry","task","setTask","setChecked","setDeleted","completed","placeholder","add","CompletedTasksDiv","StyledHR","hr","ChevronIcon","expanded","CompletedTasks","tasks","setExpanded","TasksListDiv","NoTasksText","p","TasksList","setTasks","doneTasks","setDoneTasks","setCompleted","activeTaskList","insert","resource","tasklist","statusText","Error","update","$push","result","body","updateTimers","setUpdateTimers","updateTask","setList","listId","taskId","$merge","oldTaskTimer","clearTimeout","newTaskTimer","setTimeout","patch","$unset","deleteTask","delete","$splice","toggleCompleted","src","setSrc","dest","setDest","oldTask","newSrc","newDest","TasksMainDiv","HomeTasks","setTaskLists","sort","b","position","localeCompare","items","showCompleted","maxResults","elt","App","min","floor","random","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.50cc16f3.chunk.js","sourcesContent":["import {\n  createContext,\n  Dispatch,\n  ReactElement,\n  SetStateAction,\n  useContext,\n  useEffect,\n  useReducer,\n  useState,\n} from 'react';\nimport {\n  CheckboxProps,\n  Checkbox,\n  InputProps,\n  Input,\n  ThemeProvider,\n  withStyles,\n  createMuiTheme,\n} from '@material-ui/core';\nimport {\n  DatePicker,\n  DatePickerProps,\n  MuiPickersUtilsProvider,\n} from '@material-ui/pickers';\nimport DayJsUtils from '@date-io/dayjs';\nimport { Task } from './config';\n\ntype Arr = readonly unknown[];\nexport function partial<T extends Arr, U extends Arr, R>(\n  f: (...args: [...T, ...U]) => R,\n  ...headArgs: T\n) {\n  return (...tailArgs: U) => f(...headArgs, ...tailArgs);\n}\n\nexport function getValidURL(link: string): string {\n  return /^https?:\\/\\//.test(link) !== null ? link : `//${link}`;\n}\n\nconst ls = window.localStorage;\n\nexport function useCached<T>(\n  key: string,\n  defaultValue: T,\n): [T, Dispatch<SetStateAction<T>>] {\n  const [data, setData] = useState<T>(() => {\n    const cached = ls.getItem(key);\n    return cached !== null ? JSON.parse(cached) : defaultValue;\n  });\n\n  useEffect(() => {\n    ls.setItem(key, JSON.stringify(data));\n  }, [data, key]);\n\n  return [data, setData];\n}\n\n// export function useQuery(key: string): {\n//   param: option<string>;\n//   setParam: Dispatch<SetStateAction<option<string>>>;\n// } {\n//   const [param, setParam] = useState<option<string>>(() => {\n//     const queryParams = new URLSearchParams(window.location.search);\n//     return queryParams.has(key) ? queryParams.get(key) : null;\n//   });\n\n//   useEffect(() => {\n//     const queryParams = new URLSearchParams(window.location.search);\n//     const set = param !== null;\n\n//     if (set) queryParams.set(key, param as string);\n//     else queryParams.delete(key);\n\n//     window.history.replaceState(\n//       null,\n//       key,\n//       `?${queryParams.toString()}${window.location.hash}`,\n//     );\n//   }, [param, key]);\n\n//   return { param, setParam };\n// }\n\n// export function useLoginError() {\n//   const [data, setData] = useCached<option<string>>('loginerror', null);\n//   return { loginError: data, setLoginError: setData };\n// }\n\nexport const HomeCheckbox = withStyles(\n  {\n    root: {\n      color: 'var(--txt)',\n      '&$checked': {\n        color: 'var(--txt)',\n      },\n    },\n    checked: {},\n  },\n  { index: 1 },\n)((props: CheckboxProps) => <Checkbox color=\"default\" {...props} />);\n\nexport const inputStyles = (txtcolor: string, linecolor: string) => ({\n  root: {\n    color: `${txtcolor} !important`,\n  },\n  underline: {\n    '&:before': {\n      borderBottom: `1px solid ${linecolor} !important`,\n    },\n    '&:hover:not($disabled):not($focused):not($error):before': {\n      borderBottom: `2px solid ${linecolor} !important`,\n    },\n    '&:after': {\n      borderBottom: `3px solid ${linecolor} !important`,\n    },\n  },\n  disabled: {},\n  focused: {},\n  error: {\n    '&:before': {\n      borderBottom: `1px solid red !important`,\n    },\n    '&:after': {\n      borderBottom: `3px solid red !important`,\n    },\n  },\n});\n\n// If you're wondering why everything in this theme is !important,\n// I am too :). Calendar styling doesn't show up correctly in production\n// build unless !important is used. I know this probably indicates a bigger\n// issue, but I don't want to spend more time on this issue right now.\n// Other possible paths - bundle analyzer or try Vite\nexport const dateTimePickerTheme = createMuiTheme({\n  overrides: {\n    MuiInput: inputStyles('var(--htx)', 'var(--htx)'),\n    MuiPaper: {\n      root: {\n        border: '3px solid var(--frg) !important',\n      },\n      rounded: {\n        borderRadius: '0 !important',\n        backgroundColor: 'var(--frg) !important',\n      },\n    },\n    MuiPickersToolbar: {\n      toolbar: {\n        backgroundColor: 'var(--hdr) !important',\n      },\n    },\n    MuiPickersCalendarHeader: {\n      iconButton: {\n        color: 'var(--txt) !important',\n        backgroundColor: 'var(--hdr) !important',\n        margin: '0 5px !important',\n      },\n      switchHeader: {\n        color: 'var(--txt) !important',\n        backgroundColor: 'var(--frg) !important',\n      },\n      daysHeader: {\n        color: 'var(--txt) !important',\n        backgroundColor: 'var(--frg) !important',\n      },\n      dayLabel: {\n        color: 'var(--txt) !important',\n      },\n    },\n    MuiPickersDay: {\n      day: {\n        color: 'var(--txt) !important',\n        backgroundColor: 'var(--frg) !important',\n        '&:hover': {\n          backgroundColor: 'rgba(255, 255, 255, 0.1) !important',\n        },\n      },\n      daySelected: {\n        color: 'var(--txt) !important',\n        backgroundColor: 'var(--hdr) !important',\n        '&:hover': {\n          backgroundColor: 'var(--bkg) !important',\n        },\n      },\n      dayDisabled: {\n        color: 'var(--htx) !important',\n      },\n      current: {\n        color: 'var(--txt) !important',\n      },\n    },\n    MuiPickersClock: {\n      clock: {\n        backgroundColor: 'var(--hdr) !important',\n      },\n      pin: {\n        backgroundColor: 'var(--frg) !important',\n      },\n    },\n    MuiPickersClockNumber: {\n      clockNumber: {\n        color: 'var(--txt) !important',\n      },\n      clockNumberSelected: {\n        backgroundColor: 'var(--frg) !important',\n      },\n    },\n    MuiPickersClockPointer: {\n      pointer: {\n        backgroundColor: 'var(--frg) !important',\n      },\n      thumb: {\n        borderColor: '#00000000 !important',\n        backgroundColor: 'var(--frg) !important',\n      },\n      noPoint: {\n        backgroundColor: '#00000000 !important',\n      },\n    },\n    MuiPickersYear: {\n      root: {\n        color: 'var(--htx) !important',\n      },\n      yearSelected: {\n        color: 'var(--txt) !important',\n      },\n    },\n  },\n});\n\nexport const HomeMaterialInput = withStyles(\n  inputStyles('var(--txt)', 'var(--txt)'),\n  {\n    index: 1,\n  },\n)((props: InputProps) => <Input {...props} />);\n\nexport function HomeDatePicker(props: DatePickerProps) {\n  return (\n    <MuiPickersUtilsProvider utils={DayJsUtils}>\n      <ThemeProvider theme={dateTimePickerTheme}>\n        <DatePicker {...props} />\n      </ThemeProvider>\n    </MuiPickersUtilsProvider>\n  );\n}\n\n// export function HomeDateTimePicker(props: DateTimePickerProps) {\n//   return (\n//     <MuiPickersUtilsProvider utils={DayJsUtils}>\n//       <ThemeProvider theme={dateTimePickerTheme}>\n//         <DateTimePicker {...props} />\n//       </ThemeProvider>\n//     </MuiPickersUtilsProvider>\n//   );\n// }\n\n// Context stuff\n\ntype LoginContextType = {\n  loggedIn: boolean;\n  setLoggedIn: Dispatch<boolean>;\n};\n\nexport const LoginContext = createContext<LoginContextType>({\n  loggedIn: false,\n  setLoggedIn: () => {},\n});\n\nexport function LoginStore({\n  children,\n}: {\n  children: ReactElement | ReactElement[];\n}) {\n  const [loggedIn, setLoggedIn] = useState(false);\n\n  return (\n    <LoginContext.Provider\n      value={{ loggedIn: loggedIn, setLoggedIn: setLoggedIn }}\n    >\n      {children}\n    </LoginContext.Provider>\n  );\n}\n\nexport const useLogin = () => useContext(LoginContext);\n\ntype AddTask = (t: Task) => void;\ntype AddTaskContextType = {\n  addTask: AddTask;\n  setAddTask: Dispatch<AddTask>;\n};\n\nexport const AddTaskContext = createContext<AddTaskContextType>({\n  addTask: (t: Task) => {},\n  setAddTask: () => {},\n});\n\nexport function AddTaskStore({\n  children,\n}: {\n  children: ReactElement | ReactElement[];\n}) {\n  const [state, dispatch] = useReducer(\n    (_: AddTask, a: AddTask) => a,\n    (t: Task) => {},\n  );\n\n  return (\n    <AddTaskContext.Provider value={{ addTask: state, setAddTask: dispatch }}>\n      {children}\n    </AddTaskContext.Provider>\n  );\n}\n\nexport const useAddTask = () => useContext(AddTaskContext);\n","import { useCallback, useEffect, useState } from 'react';\nimport validator from 'validator';\nimport { Sites, option, SITES_DATA_URL } from './config';\nimport { getValidURL, useCached } from './utils';\nimport styled from 'styled-components';\n\nconst SectionContainer = styled.div`\n  vertical-align: top;\n\n  display: inline-block;\n\n  overflow: hidden;\n\n  box-sizing: border-box;\n  margin: 2px;\n  height: var(--section-height);\n  width: var(--section-width);\n\n  background-color: var(--hdr);\n\n  text-align: left;\n  color: var(--htx);\n\n  &:before {\n    content: '';\n    margin-left: 5px;\n  }\n`;\n\nconst LinksWrapper = styled.div`\n  padding: 10px 15px 15px 10px;\n\n  height: 100%;\n\n  background-color: var(--frg);\n`;\n\nfunction Section({\n  title,\n  children,\n}: {\n  title: string;\n  children: JSX.Element[];\n}) {\n  return children.length ? (\n    <SectionContainer id={title}>\n      {title}\n      <LinksWrapper>{children}</LinksWrapper>\n    </SectionContainer>\n  ) : (\n    <></>\n  );\n}\n\nconst Link = styled.a`\n  margin-bottom: var(--link-margin);\n  padding-left: 5px;\n\n  display: block;\n\n  color: var(--txt);\n  text-decoration: none;\n\n  &:hover,\n  &.selected {\n    background-color: rgba(255, 255, 255, 0.05);\n\n    color: var(--hgl);\n  }\n`;\n\nexport default function LinkSections({\n  query,\n  setAction,\n}: {\n  query: string;\n  setAction: (s: option<string>) => void;\n}) {\n  const [sites, setSites] = useCached<option<Sites>>('sites', null);\n  const [sections, setSections] = useState<JSX.Element[]>([]);\n  const [selected, setSelected] = useState<option<number>>(null);\n  const [totalMatched, setTotalMatched] = useState(0);\n\n  useEffect(() => {\n    fetch(SITES_DATA_URL)\n      .then((res) => res.json())\n      .then((data) => setSites(data))\n      .catch((err) => console.error(err));\n  }, [setSites]);\n\n  useEffect(() => {\n    if (sites !== null)\n      document.documentElement.style.setProperty(\n        '--max-links',\n        `${Math.max(\n          ...Object.keys(sites).map(\n            (category) => Object.keys(sites[category]).length,\n          ),\n        )}`,\n      );\n  }, [sites]);\n\n  const updateSections = useCallback(\n    function (newSelected: option<number>) {\n      if (sites === null) return;\n\n      const newSections: JSX.Element[] = [];\n      let pos = 0,\n        matches = false;\n      Object.keys(sites).forEach((category, idx) => {\n        const links = sites[category];\n        const filtered = Object.keys(links).filter((name) =>\n          name.toLowerCase().includes(query),\n        );\n\n        if (filtered.length) {\n          matches = true;\n          newSections.push(\n            <Section key={idx} title={category}>\n              {filtered.map((name, idx) => {\n                const isSelected = pos++ === newSelected;\n                if (isSelected) setAction(links[name]);\n\n                return (\n                  <Link\n                    key={idx}\n                    href={getValidURL(links[name])}\n                    className={isSelected ? 'selected' : ''}\n                  >\n                    {name}\n                  </Link>\n                );\n              })}\n            </Section>,\n          );\n        }\n      });\n      setTotalMatched(pos);\n      setSections(newSections);\n      setSelected(newSelected);\n      if (!matches || !query.length) setAction(null);\n    },\n    [query, sites, setAction],\n  );\n\n  useEffect(() => {\n    if (validator.isURL(query)) {\n      setAction(query);\n      return;\n    }\n    if (\n      query.match(/^lh\\d{3,5}$/) !== null ||\n      query.match(/^localhost:\\d{3,5}$/) !== null\n    ) {\n      setAction(\n        `http://localhost:${(query.match(/\\d{3,5}/) as RegExpMatchArray)[0]}`,\n      );\n      return;\n    }\n    // Assemble list of sections based on query\n    updateSections(query.length ? 0 : null);\n  }, [query, setAction, updateSections]);\n\n  useEffect(() => {\n    function onKeyDown(e: KeyboardEvent) {\n      let newSelected = selected;\n      if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {\n        if (selected !== null && selected > 0) newSelected = selected - 1;\n      } else if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {\n        if (selected !== null && selected < totalMatched)\n          newSelected = selected + 1;\n      }\n      if (newSelected !== selected) updateSections(newSelected);\n    }\n    document.addEventListener('keydown', onKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n    };\n  }, [selected, totalMatched, updateSections]);\n\n  return <div id=\"links\">{sections}</div>;\n}\n","export const PAGE_HUE_MIN = 10;\nexport const PAGE_HUE_MAX = 360;\n\nexport const DEFAULT_TAB_TITLE = 'üè† Home';\nexport const SEARCH_TAB_PREFIX = 'üîç';\nexport const NOTE_TAB_PREFIX = 'üìù';\n\nexport const DEFAULT_SEARCH_URL = 'https://google.com/search';\n\nexport const SITES_DATA_URL =\n  'https://gist.githubusercontent.com/minchingtonak/b60356be980dc4f430fe73b523d1fafb/raw';\n\nexport const TASK_UPDATE_DELAY = 500; // ms\n\nexport type option<T> = T | null;\n\nexport type Sites = { [k: string]: { [k: string]: string } };\n\n// export type TaskLinks = Required<gapi.client.Tasks.Schema.TaskLinks>;\n// export type TaskList = Required<gapi.client.Tasks.Schema.TaskList>;\n// export type TaskLists = Required<gapi.client.Tasks.Schema.TaskLists>;\n// export type Tasks = Required<gapi.client.Tasks.Schema.Tasks>;\n// export type Task = Required<gapi.client.Tasks.Schema.Task>;\n// export type Task = Required<gapi.client.Tasks.Schema.Task>;\n\nexport interface TaskLinks extends gapi.client.Tasks.Schema.TaskLinks {}\nexport interface TaskList extends gapi.client.Tasks.Schema.TaskList {}\nexport interface TaskLists extends gapi.client.Tasks.Schema.TaskLists {}\nexport interface Tasks extends gapi.client.Tasks.Schema.Tasks {}\nexport type Task = gapi.client.Tasks.Schema.Task;\n","import { useEffect, useState } from 'react';\nimport { gapi } from 'gapi-script';\nimport { useCached, useLogin } from './utils';\n\nconst CLIENT_ID =\n  '529992368744-omh87l4imgosp83f9l67toav9rgl2bru.apps.googleusercontent.com';\nconst API_KEY = 'AIzaSyBZJJOMt3MkTKNiTgX8lRAkRx8Nd0A8lTc';\n\nconst TASKS_DISCOVERY_DOCS = [\n  'https://www.googleapis.com/discovery/v1/apis/tasks/v1/rest',\n];\nconst TASKS_SCOPE = 'https://www.googleapis.com/auth/tasks';\n\nlet called = false;\n\nfunction initClient(updateLoggedInStatus: (status: boolean) => void) {\n  if (called) return;\n  called = true;\n  gapi.client\n    .init({\n      apiKey: API_KEY,\n      clientId: CLIENT_ID,\n      discoveryDocs: TASKS_DISCOVERY_DOCS,\n      scope: TASKS_SCOPE,\n    })\n    .then(() => {\n      gapi.auth2.getAuthInstance().isSignedIn.listen(updateLoggedInStatus);\n\n      // initial sign in\n      updateLoggedInStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n    })\n    .catch((err) => {\n      console.error('Auth init error: ', err);\n    });\n}\n\nexport function useGoogleAPI() {\n  const { loggedIn, setLoggedIn } = useLogin();\n  const [clientInit, setClientInit] = useState(false);\n  const [offlineAccess, setOfflineAccess] = useCached('offlineaccess', false);\n\n  useEffect(() => {\n    if (!loggedIn)\n      gapi.load('client:auth2', () => {\n        initClient((status) => {\n          setLoggedIn(status);\n          console.log('loggedin status', status);\n          // setTimeout(() => {\n          //   if (status && !offlineAccess)\n          //     gapi.auth2\n          //       .getAuthInstance()\n          //       .currentUser.get()\n          //       .grantOfflineAccess({ scope: TASKS_SCOPE, prompt: 'consent' })\n          //       .then(({ code }) => {\n          //         setOfflineAccess(true);\n          //       });\n          // }, 5000);\n        });\n        setClientInit(true);\n      });\n  }, [loggedIn, setLoggedIn, offlineAccess, setOfflineAccess]);\n\n  useEffect(() => {\n    console.log(loggedIn);\n  }, [loggedIn]);\n\n  const authInstance = clientInit\n    ? gapi.auth2.getAuthInstance()\n    : { signIn: () => {}, signOut: () => {} };\n\n  return {\n    loggedIn: loggedIn,\n    setLoggedIn: setLoggedIn,\n    logIn: authInstance.signIn,\n    logOut: authInstance.signOut,\n    username: loggedIn\n      ? gapi.auth2\n          .getAuthInstance()\n          .currentUser.get()\n          .getBasicProfile()\n          .getGivenName()\n      : null,\n  };\n}\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { useGoogleAPI } from './auth';\nimport {\n  DEFAULT_SEARCH_URL,\n  DEFAULT_TAB_TITLE,\n  NOTE_TAB_PREFIX,\n  option,\n  SEARCH_TAB_PREFIX,\n} from './config';\nimport { getValidURL, HomeDatePicker, partial, useAddTask } from './utils';\n\nconst SearchInput = styled.input`\n  margin: 0px 2px 2px 2px;\n  padding-left: 5px;\n  box-sizing: border-box;\n\n  border: none;\n  width: var(--lwidth);\n  height: 50px;\n\n  font-size: 40px;\n  background-color: var(--frg);\n  color: var(--txt);\n  font-family: Terminus, Montserrat;\n\n  &:focus {\n    outline: none;\n  }\n\n  @media screen and (max-width: 912px) {\n    & {\n      width: var(--mwidth);\n    }\n  }\n\n  @media screen and (max-width: 608px) {\n    & {\n      width: var(--swidth);\n    }\n  }\n`;\n\nconst SearchDatePicker = styled(HomeDatePicker)`\n  display: none !important;\n`;\n\nexport default function SearchBar({\n  text,\n  setText,\n  action,\n}: {\n  text: string;\n  setText: (s: string) => void;\n  action: option<string>;\n}) {\n  const input = useRef<HTMLInputElement>(null);\n  const [pickerOpen, setPickerOpen] = useState(false);\n  const [taskText, setTaskText] = useState<option<string>>(null);\n  const { addTask } = useAddTask();\n  const { loggedIn, logOut, logIn } = useGoogleAPI();\n\n  // useEffect(() => {\n  //   // Clikcing on anything except a link will focus the search bar\n  //   (document.querySelector('body') as HTMLBodyElement).onclick = (e) => {\n  //     if (input && input.current) input.current.focus();\n  //   };\n  // }, [input]);\n\n  const updateTitle = useCallback(\n    (start: string) => {\n      if (text.length) document.title = `${start} - ${text}`;\n      else document.title = DEFAULT_TAB_TITLE;\n    },\n    [text],\n  );\n\n  useEffect(() => {\n    updateTitle(SEARCH_TAB_PREFIX);\n  }, [text, updateTitle]);\n\n  useEffect(() => {\n    const blurCallback = updateTitle.bind(null, NOTE_TAB_PREFIX),\n      focusCallback = updateTitle.bind(null, SEARCH_TAB_PREFIX);\n\n    window.addEventListener('blur', blurCallback);\n    window.addEventListener('focus', focusCallback);\n\n    return () => {\n      window.removeEventListener('blur', blurCallback);\n      window.removeEventListener('focus', focusCallback);\n    };\n  }, [updateTitle]);\n\n  return (\n    <>\n      <form\n        id={'action'}\n        onSubmit={(e) => {\n          e.preventDefault();\n\n          if (/^\\/t(ask)?/.test(text)) {\n            const matches = text.match(/[\\s].*/g);\n            setTaskText(matches !== null ? matches[0].trim() : null);\n            setPickerOpen(true);\n          } else if (/^\\/login/.test(text)) {\n            if (loggedIn) return;\n            logIn();\n            setText('');\n          } else if (/^\\/logout/.test(text)) {\n            if (!loggedIn) return;\n            logOut();\n            setText('');\n            window.localStorage.clear();\n          } else {\n            window.location.assign(\n              action !== null\n                ? getValidURL(action)\n                : `${DEFAULT_SEARCH_URL}?q=${encodeURIComponent(text)}`,\n            );\n          }\n        }}\n      >\n        <SearchInput\n          type=\"text\"\n          value={text}\n          ref={input}\n          autoFocus\n          autoComplete=\"off\"\n          onChange={(e) => setText(e.target.value)}\n        />\n      </form>\n      <SearchDatePicker\n        variant=\"dialog\"\n        autoOk\n        okLabel={<></>}\n        cancelLabel={<></>}\n        value={new Date()}\n        open={pickerOpen}\n        onChange={() => {}}\n        onAccept={(d) => {\n          if (taskText !== null && d) {\n            addTask({ title: taskText, due: d.toISOString()});\n            setText('');\n          }\n        }}\n        onClose={partial(setPickerOpen, false)}\n      />\n    </>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport dayjs from 'dayjs';\n\nconst Wrapper = styled.div`\n  width: 180px;\n\n  margin-right: auto;\n\n  display: flex;\n`;\n\nconst DateSpan = styled.span`\n  align-self: flex-start;\n\n  color: var(--htx);\n`;\n\nconst TimeSpan = styled(DateSpan)`\n  margin-right: auto;\n\n  align-self: flex-end;\n`;\n\nexport default function Clock() {\n  const [date, setDate] = useState(new Date());\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setDate(new Date());\n    }, 1000);\n\n    return () => {\n      clearInterval(timer);\n    };\n  }, []);\n\n  return (\n    <>\n      <Wrapper>\n        <TimeSpan id=\"clock\">{dayjs(date).format('HH:mm:ss')}</TimeSpan>\n        <DateSpan id=\"date\">{dayjs(date).format('ddd, MMM D')}</DateSpan>\n      </Wrapper>\n    </>\n  );\n}\n","import Clock from './Clock';\nimport styled from 'styled-components';\n\nconst StaticLinksContainer = styled.div`\n  margin: 2px 2px 0 2px;\n  box-sizing: border-box;\n\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  align-items: center;\n\n  padding: 0 5px;\n  width: var(--lwidth);\n\n  background-color: var(--hdr);\n\n  color: var(--txt);\n  font-size: 16px;\n  line-height: 30px;\n\n  @media screen and (max-width: 912px) {\n    & {\n      width: var(--mwidth);\n      margin: 2px auto 0 auto;\n    }\n  }\n\n  @media screen and (max-width: 608px) {\n    & {\n      width: var(--swidth);\n    }\n  }\n`;\n\nconst StaticLink = styled.a`\n  color: var(--htx);\n  text-decoration: none;\n\n  &:hover {\n    color: var(--txt);\n  }\n\n  & + & {\n    margin-left: 15px;\n  }\n\n  @media screen and (max-width: 608px) {\n    &:first-of-type {\n      margin-left: 110px;\n    }\n  }\n`;\n\nexport default function StaticLinks() {\n  const links = ['Spotify', 'Slack', 'Steam'];\n\n  return (\n    <StaticLinksContainer id=\"static-links\">\n      <Clock />\n      {links.map((link, idx) => (\n        <StaticLink key={idx} href={link.toLowerCase() + ':'}>\n          {link}\n        </StaticLink>\n      ))}\n    </StaticLinksContainer>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useResizeDetector } from 'react-resize-detector';\nimport { option } from './config';\nimport LinkSections from './LinkSections';\nimport SearchBar from './SearchBar';\nimport StaticLinks from './StaticLinks';\nimport styled from 'styled-components';\n\nconst MainContainer = styled.div`\n  // transition: 0.2s height;\n\n  max-width: 912px;\n\n  user-select: none;\n  text-align: center;\n`;\n\nexport default function HomeSearch() {\n  const [query, setQuery] = useState('');\n  const [action, setAction] = useState<option<string>>(null);\n  const { height, ref } = useResizeDetector();\n\n  useEffect(() => {\n    if (height !== undefined)\n      document.documentElement.style.setProperty(\n        '--homesearch-height',\n        `${height}px`,\n      );\n  }, [height]);\n\n  return (\n    <MainContainer id=\"main\" ref={ref}>\n      <StaticLinks />\n      <SearchBar text={query} setText={setQuery} action={action} />\n      <LinkSections query={query} setAction={setAction} />\n    </MainContainer>\n  );\n}\n","import styled from 'styled-components';\nimport { TaskList } from './config';\nimport { useState } from 'react';\nimport { partial } from './utils';\nimport { useGoogleAPI } from './auth';\n\nconst TasksBarDiv = styled.div`\n  padding: 5px;\n\n  height: 20px;\n\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n\n  background-color: var(--hdr);\n\n  color: var(--htx);\n`;\n\nconst TaskListChooserButton = styled.i.attrs({ className: 'fas fa-bars' })`\n  padding: 5px 15px 5px 5px;\n\n  background-color: var(--hdr);\n  color: var(--txt);\n  font-size: 1.2em;\n`;\n\nconst TasksBarText = styled.span`\n  margin: 0 auto 0 0;\n`;\n\nconst DropDown = styled.div<{ open: boolean }>`\n  max-height: ${(props) => (props.open ? `500px` : '0')};\n  transition: max-height\n    ${(props) => (props.open ? '0.25s ease-in' : '0.15s ease-out')};\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n\n  overflow: auto;\n\n  background-color: var(--frg);\n  color: var(--txt);\n`;\n\nconst DropDownElement = styled.span`\n  padding: 5px;\n\n  &:hover {\n    background-color: var(--hdr);\n  }\n`;\n\nexport function TasksBar({\n  tasklists,\n  activeList,\n  setActiveList,\n}: {\n  tasklists: TaskList[];\n  activeList: TaskList;\n  setActiveList: (t: TaskList) => void;\n}) {\n  const [open, setOpen] = useState(false);\n  const { loggedIn } = useGoogleAPI();\n\n  return (\n    <>\n      <TasksBarDiv id=\"tasksbar\">\n        {loggedIn ? (\n          <TaskListChooserButton onClick={partial(setOpen, !open)} />\n        ) : (\n          <></>\n        )}\n        <TasksBarText>\n          {loggedIn && activeList.title ? `Tasks - ${activeList.title}` : 'Tasks'}\n        </TasksBarText>\n      </TasksBarDiv>\n      <DropDown open={open}>\n        {tasklists.map((list, idx) => (\n          <DropDownElement\n            key={idx}\n            onClick={() => {\n              setActiveList(list);\n              setOpen(false);\n            }}\n          >\n            {list.title}\n          </DropDownElement>\n        ))}\n      </DropDown>\n    </>\n  );\n}\n","import { ReactElement, useCallback, useEffect, useState } from 'react';\nimport update from 'immutability-helper';\nimport styled from 'styled-components';\nimport dayjs from 'dayjs';\nimport { Task, TaskList, TASK_UPDATE_DELAY } from './config';\nimport {\n  HomeCheckbox,\n  HomeDatePicker,\n  HomeMaterialInput,\n  partial,\n  useAddTask,\n} from './utils';\nimport { useGoogleAPI } from './auth';\n\nconst TaskEntryDiv = styled.div`\n  margin: 0 5px 5px 5px;\n  padding: 0 0 10px 0;\n\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n\n  background-color: var(--hdr);\n\n  color: var(--txt);\n`;\n\nconst TaskDescInput = styled(HomeMaterialInput)`\n  // margin: 10px 10px 10px 7px;\n\n  font-size: large;\n`;\n\nconst TaskUIDiv = styled.div`\n  padding-top: 3px;\n\n  display: flex;\n  flex-direction: column;\n`;\n\nconst TrashIcon = styled.i.attrs({ className: 'far fa-trash-alt fa-lg' })`\n  padding: 10px;\n\n  transform: scale(0.96);\n\n  color: var(--htx);\n\n  &:hover {\n    color: var(--txt);\n  }\n`;\n\nconst DueDateDiv = styled.div`\n  margin-right: 0;\n\n  display: flex;\n  align-content: flex-start;\n  align-items: center;\n`;\n\nconst DueIcon = styled.i.attrs({ className: 'far fa-clock' })`\n  margin: 5px 5px 5px 4px;\n  color: var(--htx);\n`;\n\nconst TaskDatePicker = styled(HomeDatePicker)`\n  transform: scale(0.88) translateX(-13px);\n`;\n\nfunction TaskEntry({\n  task,\n  setTask,\n  setChecked,\n  setDeleted,\n}: {\n  task: Task;\n  setTask: (t: Partial<Task>) => void;\n  setChecked: () => void;\n  setDeleted: () => void;\n}) {\n  return (\n    <TaskEntryDiv className=\"taskentry\">\n      <HomeCheckbox\n        checked={task.completed !== undefined}\n        onChange={setChecked}\n      />\n      <TaskUIDiv>\n        <TaskDescInput\n          value={task.title}\n          error={task.title === ''}\n          placeholder=\"Description cannot be empty\"\n          onChange={(e) => setTask({ title: e.target.value })}\n        />\n        <DueDateDiv>\n          <DueIcon />\n          <TaskDatePicker\n            variant=\"inline\"\n            autoOk\n            // IDK why the offset here isn't the same as the native tasks clients\n            value={task.due ? dayjs(task.due).add(12, 'hour') : null}\n            format={'dddd, MMM D'}\n            onAccept={(d) => {\n              setTask({ due: d?.toISOString() });\n            }}\n            onChange={() => {}}\n          />\n        </DueDateDiv>\n      </TaskUIDiv>\n      <TrashIcon onClick={setDeleted} />\n    </TaskEntryDiv>\n  );\n}\n\nconst CompletedTasksDiv = styled.div`\n  padding: 5px;\n  margin: 0 5px 5px 5px;\n\n  color: var(--htx);\n\n  &:hover {\n    color: var(--txt);\n    hr {\n      background-color: var(--txt);\n    }\n  }\n`;\n\nconst StyledHR = styled.hr`\n  height: 1px;\n\n  border-width: 0;\n\n  background-color: var(--htx);\n`;\n\ntype ChevronIconProps = {\n  expanded: boolean;\n};\n\nconst ChevronIcon = styled.i.attrs<ChevronIconProps>(({ expanded }) => ({\n  className: `fas fa-chevron-${expanded ? 'down' : 'right'}`,\n}))<ChevronIconProps>`\n  &.fa-chevron-right {\n    margin-right: 7px;\n  }\n\n  &.fa-chevron-down {\n    margin-right: 3px;\n  }\n`;\n\nfunction CompletedTasks({\n  tasks,\n  setTask,\n  setChecked,\n  setDeleted,\n}: {\n  tasks: Task[];\n  setTask: (taskId: string, idx: number, t: Partial<Task>) => void;\n  setChecked: (taskId: string, idx: number) => void;\n  setDeleted: (taskId: string, idx: number) => void;\n}) {\n  const [expanded, setExpanded] = useState(false);\n\n  return (\n    <>\n      <CompletedTasksDiv\n        id=\"completedtasks\"\n        onClick={partial(setExpanded, !expanded)}\n      >\n        <StyledHR />\n        <ChevronIcon expanded={expanded} />\n        <span>Completed tasks</span>\n      </CompletedTasksDiv>\n      {expanded\n        ? tasks.map((task, idx) => (\n            <TaskEntry\n              key={idx}\n              task={task}\n              setTask={partial(setTask, task.id as string, idx)}\n              setChecked={partial(setChecked, task.id as string, idx)}\n              setDeleted={partial(setDeleted, task.id as string, idx)}\n            />\n          ))\n        : ''}\n    </>\n  );\n}\n\nconst TasksListDiv = styled.div`\n  height: 100%;\n  width: 100%;\n  padding-top: 5px;\n\n  overflow: auto;\n\n  background-color: var(--frg);\n\n  color: var(--htx);\n  text-align: center;\n`;\n\n// type LogoutFailedWarningProps = {\n//   failed: boolean;\n// };\n\n// const LogoutFailedWarning = styled.span<LogoutFailedWarningProps>`\n//   margin: 0 0 5px 0;\n\n//   display: ${(props) => (props.failed ? 'inherit' : 'none')};\n\n//   color: red;\n//   font-size: 0.8em;\n// `;\n\nconst NoTasksText = styled.p`\n  margin: 20px 5px;\n`;\n\nexport function TasksList({\n  tasks,\n  setTasks,\n  completed: doneTasks,\n  setCompleted: setDoneTasks,\n  activeTaskList,\n}: {\n  tasks: Task[];\n  setTasks: (t: Task[]) => void;\n  completed: Task[];\n  setCompleted: (t: Task[]) => void;\n  activeTaskList: TaskList;\n}) {\n  const { setAddTask } = useAddTask();\n  const { loggedIn, username } = useGoogleAPI();\n\n  const addTask = useCallback(\n    (task: Task) => {\n      try {\n        gapi.client.tasks.tasks\n          ?.insert({ resource: task, tasklist: activeTaskList.id as string })\n          .then((data) => {\n            if (data.statusText !== 'OK') throw Error('failed to add task');\n            setTasks(update(tasks, { $push: [data.result] }));\n          })\n          .catch((err) => console.error(err));\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    [tasks, setTasks, activeTaskList.id],\n  );\n\n  useEffect(() => {\n    setAddTask(addTask);\n  }, [addTask, setAddTask]);\n\n  const [updateTimers, setUpdateTimers] = useState<{ [k: string]: number }>({});\n\n  function updateTask(\n    list: Task[],\n    setList: (t: Task[]) => void,\n    listId: string,\n    taskId: string,\n    idx: number,\n    task: Partial<Task>,\n  ) {\n    // update local tasks list\n    const updated = update(list, {\n      [idx]: { $merge: task },\n    });\n    setList(updated);\n\n    // check if timer for this task id is already in updateTimers\n    const oldTaskTimer = updateTimers[taskId];\n    if (oldTaskTimer !== undefined)\n      // if it is, cancel it\n      clearTimeout(oldTaskTimer);\n\n    if (task.title === '') return;\n\n    // schedule a new update\n    const newTaskTimer = window.setTimeout(() => {\n      gapi.client.tasks.tasks\n        ?.patch({ resource: task, tasklist: listId, task: taskId })\n        .then((data) => {\n          if (data.statusText !== 'OK')\n            throw Error(`failed to update task ${listId} : ${taskId}`);\n          // clear this task's timer\n          setUpdateTimers(update(updateTimers, { $unset: [taskId] }));\n        })\n        .catch((err) => console.error(err));\n    }, TASK_UPDATE_DELAY);\n\n    setUpdateTimers(\n      update(updateTimers, { $merge: { [taskId]: newTaskTimer } }),\n    );\n  }\n\n  function deleteTask(\n    list: Task[],\n    setList: (t: Task[]) => void,\n    listId: string,\n    taskId: string,\n    idx: number,\n  ) {\n    // delete the task\n    // console.log(gapi.client.tasks.tasks);\n    // console.log(gapi.client.tasks.tasklists);\n    try {\n      gapi.client.tasks.tasks\n        ?.delete({ tasklist: listId, task: taskId })\n        .then((data) => {\n          if (data.status !== 204)\n            throw Error(`failed to delete task ${listId} : ${taskId}`);\n\n          // update local copy\n          setList(update(list, { $splice: [[idx, 1]] }));\n        })\n        .catch((err) => console.error(err));\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  function toggleCompleted(\n    src: Task[],\n    setSrc: (t: Task[]) => void,\n    dest: Task[],\n    setDest: (t: Task[]) => void,\n    listId: string,\n    taskId: string,\n    idx: number,\n  ) {\n    // assemble updated task\n    const oldTask = src[idx];\n    const query = {\n      status: oldTask.status === 'completed' ? 'needsAction' : 'completed',\n    };\n\n    // send update\n    gapi.client.tasks.tasks\n      ?.patch({ resource: query, tasklist: listId, task: taskId })\n      .then((data) => {\n        if (data.statusText !== 'OK')\n          throw Error(`failed to toggle task completed ${listId} : ${taskId}`);\n\n        // remove from src list\n        const newSrc = update(src, { $splice: [[idx, 1]] });\n        setSrc(newSrc);\n\n        // add to dest list\n        const newDest = update(dest, {\n          $push: [\n            update(\n              // update status, remove completed field if necessary\n              oldTask,\n              oldTask.status === 'completed'\n                ? { $unset: ['completed'], $merge: { status: 'needsAction' } }\n                : { $merge: { status: 'completed' } },\n            ),\n          ],\n        });\n        setDest(newDest);\n      });\n  }\n\n  let body: ReactElement;\n  if (loggedIn) {\n    body = (\n      <>\n        {tasks.length ? (\n          tasks.map((task, idx) => (\n            <TaskEntry\n              key={idx}\n              task={task}\n              setTask={partial(\n                updateTask,\n                tasks,\n                setTasks,\n                activeTaskList.id as string,\n                task.id as string,\n                idx,\n              )}\n              setChecked={partial(\n                toggleCompleted,\n                tasks,\n                setTasks,\n                doneTasks,\n                setDoneTasks,\n                activeTaskList.id as string,\n                task.id as string,\n                idx,\n              )}\n              setDeleted={partial(\n                deleteTask,\n                tasks,\n                setTasks,\n                activeTaskList.id as string,\n                task.id as string,\n                idx,\n              )}\n            />\n          ))\n        ) : (\n          <NoTasksText>\n            Looks like you have some free time, {username} :)\n          </NoTasksText>\n        )}\n        <CompletedTasks\n          tasks={doneTasks}\n          setTask={partial(\n            updateTask,\n            doneTasks,\n            setDoneTasks,\n            activeTaskList.id as string,\n          )}\n          setChecked={partial(\n            toggleCompleted,\n            doneTasks,\n            setDoneTasks,\n            tasks,\n            setTasks,\n            activeTaskList.id as string,\n          )}\n          setDeleted={partial(\n            deleteTask,\n            doneTasks,\n            setDoneTasks,\n            activeTaskList.id as string,\n          )}\n        />\n      </>\n    );\n  } else {\n    body = <p>Use /login to log into Tasks</p>;\n  }\n\n  return <TasksListDiv id=\"taskslist\">{body}</TasksListDiv>;\n}\n","import { useEffect } from 'react';\nimport { Task, TaskList } from './config';\nimport { TasksBar } from './TasksBar';\nimport { TasksList } from './TasksList';\nimport { useCached } from './utils';\nimport styled from 'styled-components';\nimport { useGoogleAPI } from './auth';\nimport { gapi } from 'gapi-script';\n\nconst TasksMainDiv = styled.div`\n  width: var(--section-width);\n  height: var(--homesearch-height);\n\n  display: flex;\n  flex-direction: column;\n\n  @media screen and (max-width: 608px) {\n    & {\n      height: min-content;\n      margin: 0 0 60px 0;\n    }\n  }\n`;\n\nexport default function HomeTasks() {\n  const [tasklists, setTaskLists] = useCached<TaskList[]>('tasklists', []);\n  const [activeList, setActiveList] = useCached<TaskList>('activelist', {});\n\n  const [tasks, setTasks] = useCached<Task[]>('tasks', []);\n  const [completed, setCompleted] = useCached<Task[]>('completed', []);\n  const { loggedIn } = useGoogleAPI();\n\n  useEffect(() => {\n    setTasks(\n      tasks.sort((a, b) =>\n        a.position && b.position ? a.position.localeCompare(b.position) : 0,\n      ),\n    );\n  }, [tasks, setTasks]);\n\n  useEffect(() => {\n    if (loggedIn)\n      try {\n        console.log('getting lists');\n        gapi.client.tasks.tasklists\n          ?.list()\n          .then((data) => {\n            console.log('lists', data);\n            if (data.statusText !== 'OK')\n              throw Error('failed to get tasklists');\n            if (data.result.items) {\n              setTaskLists(data.result.items);\n              if (activeList.title === undefined)\n                setActiveList(data.result.items[0]);\n            }\n          })\n          .catch((err) => {\n            console.error(err);\n          });\n      } catch (err) {\n        console.error(err);\n      }\n  }, [loggedIn, setTaskLists, setActiveList, activeList.title]);\n\n  useEffect(() => {\n    if (loggedIn && activeList.id)\n      try {\n        gapi.client.tasks.tasks\n          ?.list({\n            tasklist: activeList.id,\n            showCompleted: true,\n            maxResults: 100,\n          })\n          .then((data) => {\n            if (data.statusText !== 'OK')\n              throw Error(`failed to get tasks for list ${activeList.title}`);\n\n            const list = data.result.items || [];\n            setTasks(list.filter((elt) => elt.completed === undefined));\n            setCompleted(list.filter((elt) => elt.completed));\n          })\n          .catch((err) => console.error(err));\n      } catch (err) {\n        console.error(err);\n      }\n  }, [loggedIn, setTasks, setCompleted, activeList.id, activeList.title]);\n\n  return (\n    <TasksMainDiv id=\"tasksmain\">\n      <TasksBar\n        tasklists={tasklists}\n        activeList={activeList}\n        setActiveList={setActiveList}\n      />\n      <TasksList\n        tasks={tasks}\n        setTasks={setTasks}\n        completed={completed}\n        setCompleted={setCompleted}\n        activeTaskList={activeList}\n      />\n    </TasksMainDiv>\n  );\n}\n","import { useEffect } from 'react';\nimport HomeSearch from './HomeSearch';\nimport HomeTasks from './HomeTasks';\nimport { PAGE_HUE_MAX, PAGE_HUE_MIN } from './config';\nimport { AddTaskStore, LoginStore } from './utils';\n\nexport default function App() {\n  useEffect(() => {\n    function random(min: number, max: number) {\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n\n    // Choose a random page color base on page load\n    document.documentElement.style.setProperty(\n      '--base',\n      `${random(PAGE_HUE_MIN, PAGE_HUE_MAX)}`,\n    );\n  }, []);\n\n  return (\n    <LoginStore>\n      <AddTaskStore>\n        <HomeSearch />\n        <HomeTasks />\n      </AddTaskStore>\n    </LoginStore>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './style.css';\n// import { register } from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// register();\n"],"sourceRoot":""}